#!/usr/bin/env python3
# -*- coding: utf-8 -*-
# Copyright (C) 2019 tribe29 GmbH - License: GNU General Public License v2
# This file is part of Checkmk (https://checkmk.com). It is subject to the terms and
# conditions defined in the file COPYING, which is part of this source code package.

# yapf: disable
# type: ignore

from cmk.base.plugins.agent_based.esx_vsphere_vm import parse_esx_vsphere_vm

checkname = 'esx_vsphere_vm'


parsed = parse_esx_vsphere_vm([
    ['config.datastoreUrl',
         'maintenanceMode',
         'normal|url',
         'ds:///vmfs/volumes/vsan:5239d5cbf4c95b8c-5977b0e019a35313/|uncommitted',
         '9278987431936|name',
         'vsanDatastore|type',
         'vsan|accessible',
         'true|capacity',
         '31686121226240|freeSpace',
         '20938787651584'],
        ['config.hardware.device',
         'virtualDeviceType',
         'VirtualVmxnet3|label',
         'Network',
         'adapter',
         '1|summary',
         'DVSwitch:',
         '49',
         '76',
         '2d',
         '50',
         '6a',
         'ee',
         'f6',
         '2b-88',
         '3f',
         '37',
         '1c',
         '6c',
         '44',
         'cd',
         '29|startConnected',
         'true|allowGuestControl',
         'true|connected',
         'true|status',
         'ok'],
        ['config.hardware.memoryMB', '16384'],
        ['config.hardware.numCPU', '4'],
        ['config.hardware.numCoresPerSocket', '4'],
        ['config.template', 'false'],
        ['guest.toolsVersion', '2147483647'],
        ['guest.toolsVersionStatus', 'guestToolsUnmanaged'],
        ['guestHeartbeatStatus', 'green'],
        ['name', 'scwagprc01.widag.local'],
        ['runtime.host', 'zh1wagesx02.widag.local'],
        ['runtime.powerState', 'poweredOn'],
        ['summary.guest.hostName', 'ntnx-10-78-142-100-a-cvm'],
        ['summary.quickStats.balloonedMemory', '0'],
        ['summary.quickStats.compressedMemory', '0'],
        ['summary.quickStats.consumedOverheadMemory', '78'],
        ['summary.quickStats.distributedCpuEntitlement', '2936'],
        ['summary.quickStats.distributedMemoryEntitlement', '8049'],
        ['summary.quickStats.guestMemoryUsage', '4423'],
        ['summary.quickStats.hostMemoryUsage', '16354'],
        ['summary.quickStats.overallCpuDemand', '3479'],
        ['summary.quickStats.overallCpuUsage', '3479'],
        ['summary.quickStats.privateMemory', '16276'],
        ['summary.quickStats.sharedMemory', '102'],
        ['summary.quickStats.staticCpuEntitlement', '5167'],
        ['summary.quickStats.staticMemoryEntitlement', '16532'],
        ['summary.quickStats.swappedMemory', '0'],
        ['summary.quickStats.uptimeSeconds', '262571'],
    ],
)


discovery = {'cpu': [(None, None)],
             'datastores': [(None, None)],
             'guest_tools': [(None, {})],
             'heartbeat': [(None, {})],
             'mem_usage': [(None, {})],
             'mounted_devices': [(None, None)],
             'name': [(None, None)],
             'running_on': [(None, None)],
             'snapshots': [(None, {})],
             'snapshots_summary': [(None, {})],
             }


checks = {'cpu': [(None,
                   {},
                   [(0,
                     'demand is 3.479 Ghz, 4 virtual CPUs',
                     [('demand', 3479, None, None, None, None)])])],
          'datastores': [(None,
                          {},
                          [(0, 'Stored on vsanDatastore (28.82 TB/66.1% free)', [])])],
          'guest_tools': [(None,
                           {},
                           [(0,
                             'VMware Tools are installed, but are not managed by VMWare',
                             [])])],
          'heartbeat': [(None, {}, [(0, 'Heartbeat status is green', [])])],
          'mem_usage': [(None,
                         {'host': (10000000000, 20000000000)},
                         [
                             (1, 'Host: 15.97 GB (warn/crit at 9.31 GB/18.63 GB)', [('host', 17148411904.0, 10000000000, 20000000000, None, None)]),
                             (0, 'Guest: 4.32 GB', [('guest', 4637851648.0, None, None, None, None)]),
                             (0, 'Ballooned: 0.00 B', [('ballooned', 0.0, None, None, None, None)]),
                             (0, 'Private: 15.89 GB', [('private', 17066622976.0, None, None, None, None)]),
                             (0, 'Shared: 102.00 MB', [('shared', 106954752.0, None, None, None, None)]),
                            ])],
          'mounted_devices': [(None, {}, [(0, 'HA functionality guaranteed', [])])],
          'name': [(None, {}, [(0, 'scwagprc01.widag.local', [])])],
          'running_on': [(None, {}, [(0, 'Running on zh1wagesx02.widag.local', [])])],
          'snapshots': [(None, {}, [(0, 'Count: 0', [])])]}
